# Configuration for systemd-swap
# This file is part of systemd-swap.
# See swap.conf(5) for details.
#
# Values commented with ## are auto-detected based on hardware.
# Uncomment to override with custom values.

################################################################################
# Swap Mode
#
# auto            - Auto-detect best mode (default, recommended)
#                   - Uses zswap when disk space >= 5x RAM
#                   - Otherwise uses zram (saves disk space)
# zswap+swapfile  - Zswap + swap files (better performance, uses more disk)
# zram+swapfile   - Zram + swap files (less disk usage)
# zram            - Zram only (no disk swap)
# disabled        - Disable swap management (stops the service)
################################################################################

swap_mode=auto

################################################################################
# Zswap Settings (used in zswap+swapfile mode)
#
# Zswap compresses pages in RAM before writing to swap disk.
# With ~3x compression ratio, 8GB RAM + 50% pool = ~12GB effective swap in RAM.
# The kernel auto-manages when to writeback cold pages to disk.
################################################################################

## zswap_compressor=zstd           # Compression: lz4 (fastest), zstd (balanced), lzo
## zswap_max_pool_percent=50       # Max RAM % for compressed pool
## zswap_shrinker_enabled=1        # Proactively move cold pages to disk
## zswap_accept_threshold=85       # Resume accepting pages when pool drops to X%

################################################################################
# Zram Settings (used in zram modes)
#
# Zram creates a compressed block device in RAM.
# Size is virtual (uncompressed) size, not actual RAM usage.
################################################################################

## zram_size=80%                   # Virtual size (e.g., 80%, 1G)
## zram_alg=lz4                    # Compression: lz4 (fast), zstd (better ratio)
## zram_mem_limit=70%              # Max physical RAM zram can use (OOM protection)
## zram_prio=32767                 # Priority (max = 32767)

# Zram Writeback (optional, off by default)
# Moves incompressible/idle pages to backing storage
## zram_writeback=0

################################################################################
# SwapFile - Dynamic Swap Files (used in swapfile modes)
#
# Creates swap files dynamically when memory is low.
# Files are created and removed automatically based on demand.
################################################################################

## swapfile_enabled=1              # Enable swap file management
## swapfile_path=/swapfile         # Base path for swap files
## swapfile_chunk_size=1G          # Size of each swap file (larger = less fragmentation)
## swapfile_max_count=32           # Maximum number of swap files

################################################################################
# MGLRU Anti-Thrashing
#
# Protects active programs from being swapped out.
# Prevents system freezes when memory is low.
# Available values: auto, 0 (disabled), 100, 300, 600, 1000, 3000, 5000, 10000
################################################################################

## mglru_min_ttl_ms=auto           # Time in milliseconds (auto adjusts based on RAM)
